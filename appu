#!/usr/bin/env ruby

require '/usr/local/etc/appu/lib/helper'
require '/usr/local/etc/appu/lib/link'
require '/usr/local/etc/appu/lib/open'
require '/usr/local/etc/appu/lib/todo'
require '/usr/local/etc/appu/lib/search'
require '/usr/local/etc/appu/lib/web'
require '/usr/local/etc/appu/lib/process'
require '/usr/local/etc/appu/lib/filex'
require '/usr/local/etc/appu/lib/alias'
require '/usr/local/etc/appu/lib/memo'
require 'fileutils'
require 'colorize'

#todo
  # memo (tag-based)

operation = ARGV[0]
current_location = ""

def operate(operation)
  case operation
  when "alias", "a"
    exe_alias
  when "qq"
    abort
  when "q"
    abort
  when "open", "o"
    exe_open
  when "help", "h", "?"
    exe_help
  when "book", "b"  # bookmark
    exe_book
  when "todo", "t"
    exe_todo
  when "link", "l"
    show_linkmenu
  when "web", "w" #webfind
    exe_web
  when "clean" #clean trash
    system("rm -rf ~/.Trash/*")
  when "renamefiles"
    exe_rename
  when "del"
    del
  when "kill", "k"
    exe_kill
  when "//"
    exe_search
  else
    accusative = operation
    if (accusative != nil) && (accusative != "")
      #1st, look alias(auto)
      accusative = accusative.chomp
      if file_to_map($target_alias).keys.include? accusative
        system file_to_map($target_alias)[accusative]
      elsif
        exe_open_kid accusative.chomp
      end
    end
    home
  end
  bort
end

operate operation

